/*! stripe analytics.js 2016-02-24 */
"use strict";window.Analytics=window.Analytics||function(){var e={empty_config:"You called `Analytics.configure` without any arguments.",empty_snake_case:"An empty string was passed to toSnakeCase, implying an empty event name.",event_with_no_viewed:"An event was called, but no viewed_name, or previous view call found.",id_mismatch:"A different ID exists in cookies vs. localStorage",json_stringify_error:"JSON.stringify threw an error when it was invoked. Ensure it exists.",missing_merchant_token:"A track function was called with a user token but no merchant token.",pixel_onerror_event:"A tracking pixel threw an error event.",pixel_thrown_error:"An error was thrown while trying to inject a pixel into the page."},t={},n={warn:function(n,r){return window.location.hostname.match(/(^|\.)stripe\.com$/)?!1:void(n in t||!window.console||!window.console.warn||(t[n]=!0,window.console.warn("Stripe Analytics: "+(e[n]||n),r)))},toSnakeCase:function(e){var t=/[\s\W_]/,r=/^[\s\W_]*/,a=/[\s\W_]*$/,i=/(.)([A-Z][a-z]+)/g,o=/([a-z0-9])([A-Z])/g,s=/[\s\W_]+(.|$)/g;return e?(e=e.replace(r,""),e=e.replace(a,""),t.test(e)?e.replace(s,function(e,t){return t?"_"+t:""}).toLowerCase():(e=e.replace(i,function(e,t,n){return t+"_"+n}),e.replace(o,function(e,t,n){return t+"_"+n}).toLowerCase())):(n.warn("empty_snake_case"),e)},toQueryString:function(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if("object"==typeof a)try{a=JSON.stringify(a)}catch(i){throw n.warn("json_stringify_error",i),i}t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(a)}return t.replace("&","?")},objAssign:function(){function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;return Object.assign||function(r,a){for(var i=void 0,o=e(r),s=void 0,c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var l in i)t.call(i,l)&&(o[l]=i[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(i);for(var g=0;g<s.length;g++)n.call(i,s[g])&&(o[s[g]]=i[s[g]])}}return o}}(),injectGoogleAnalytics:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(e,t,n,r,a,i,o){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),o=t.getElementsByTagName(n)[0],i.async=1,i.src=r,o.parentNode.insertBefore(i,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga");var t={legacyCookieDomain:".stripe.com"};window.ga("create","UA-12675062-1",t),window.ga("require","displayfeatures"),window.ga("send","pageview"),e.isLoggedIn&&window.ga("set","dimension1","true")},injectMixpanel:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(e,t){if(!t.__SV){var n,r,a,i;window.mixpanel=t,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src="https://cdn.mxpnl.com/libs/mixpanel-2.2.min.js",r=e.getElementsByTagName("script")[0],r.parentNode.insertBefore(n,r),t._i=[],t.init=function(e,n,r){function o(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var s=t;for("undefined"!=typeof r?s=t[r]=[]:r="mixpanel",s.people=s.people||[],s.toString=function(e){var t="mixpanel";return"mixpanel"!==r&&(t+="."+r),e||(t+=" (stub)"),t},s.people.toString=function(){return s.toString(1)+".people (stub)"},a="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" "),i=0;i<a.length;i++)o(s,a[i]);t._i.push([e,n,r])},t.__SV=1.2}}(document,[]),window.mixpanel.init(e.mixpanel.identifier),e.mixpanel.disable?window.mixpanel.disable():(window.mixpanel.register({merchant:e.merchant}),window.mixpanel.identify(e.user),window.mixpanel.name_tag(e.mixpanel.name))},generateID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},getCookie:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var r=t[n],a=r.indexOf("="),i=decodeURIComponent(r.substr(0,a)),o=decodeURIComponent(r.substr(a+1));if(i===e)return o}return null},setCookie:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=void 0,a=void 0;n.expires===!0&&(n.expires=-1),"number"==typeof n.expires&&(r=new Date,r.setTime(r.getTime()+24*n.expires*60*60*1e3),n.expires=r),null===n.path&&(n.path="/"),t=(""+t).replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent),a=encodeURIComponent(e)+"="+t,n.expires&&(a+=";expires="+n.expires.toGMTString()),n.path&&(a+=";path="+n.path),n.domain&&(a+=";domain="+n.domain),document.cookie=a},_getCookieID:function(){try{return n.getCookie("cid")||null}catch(e){return null}},_getLocalStorageID:function(){try{return window.localStorage.getItem("lsid")||null}catch(e){return null}},_setLocalStorageID:function(e){try{window.localStorage.setItem("lsid",e)}catch(t){}},_setCookieID:function(e){try{var t={expires:7200},r=window.location.hostname.split(".").slice(-2).join(".");"stripe.com"===r&&(t.domain=".stripe.com"),n.setCookie("cid",e,t)}catch(a){}},_doNotTrack:window.navigator.doNotTrack,getCookieAndLocalStorageID:function(){if(n._doNotTrack)return"DNT";var e=n._getCookieID(),t=n._getLocalStorageID();if(e&&t&&e!==t)return n.warn("id_mismatch",{cid:e,lsid:t}),e.length>t.length?(n._setLocalStorageID(e),e):(n._setCookieID(t),t);if(e&&t)return e;if(e&&!t)return n._setLocalStorageID(e),e;if(t&&!e)return n._setCookieID(t),t;var r=n.generateID();return n._setCookieID(r),n._setLocalStorageID(r),r},getGlobalParams:function(){var e={};return e.domain=window.location.host,e.page=document.location.pathname+document.location.search+document.location.hash,e.referrer=document.referrer,e.cid=e.lsid=n.getCookieAndLocalStorageID(),e.viewport_height=window.innerHeight,e.viewport_width=window.innerWidth,e.analytics_ua="analytics.js-1.3.3-9c22a57",e},getBackupViewedName:function(e,t){return t?t:(n.warn("event_with_no_viewed",e),document.location.pathname)},injectPixel:function(e){try{var t=new Image;t.onerror=function(){n.warn("pixel_onerror_event",e)},t.src=e}catch(r){n.warn("pixel_thrown_error",r)}}},r=[n.injectPixel],a={configure:function(e){e||n.warn("empty_config"),this._config=n.objAssign(this._config,e),e.ga&&n.injectGoogleAnalytics(e.ga),e.mixpanel&&n.injectMixpanel(e)},_config:{},_state:{trackCounter:0},track:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=this._config;i||(e=n.toSnakeCase(e)),t.event=e,this._state.trackCounter+=1,t.event_count=this._state.trackCounter,o.pageviewtoken?t.page_view_id=o.pageviewtoken:(t.page_view_id=n.generateID(),o.pageviewtoken=t.page_view_id),t.event_id=t.page_view_id+"_"+this._state.trackCounter,(a.merchant||o.merchant)&&(t.merchant_id=a.merchant||o.merchant),(a.user||o.user)&&(t.merchant_id||n.warn("missing_merchant_token",e),t.user_id=a.user||o.user),t.version||!a.version&&!o.version||(t.version=a.version||o.version),(a.locale||o.locale)&&(t.stripe_locale=a.locale||o.locale);var s=n.getGlobalParams(),c=n.objAssign({},s,t);o.mixpanel&&!o.mixpanel.disabled&&window.mixpanel.track(e,c);var l=n.toQueryString(c),g=this._rootTrackingUrl+l;o.overrideTrackingUrl&&(g=this._namedUrls.hasOwnProperty(o.overrideTrackingUrl)?this._namedUrls[o.overrideTrackingUrl]+l:o.overrideTrackingUrl+l),r.forEach(function(e){e(g)})},viewed:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=n.toSnakeCase(e);return t.viewed_name=a,this._state.lastViewedEventName=a,this.track(a+".viewed",t,r,!0)},modal:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=n.toSnakeCase(e);return t.modal_name=a,t.viewed_name||(t.viewed_name=n.getBackupViewedName(e,this._state.lastViewedEventName)),this._state.lastModalEventName=a,this.track(a+".modal",t,r,!0)},action:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=n.toSnakeCase(e);return t.action_name=a,t.viewed_name||(t.viewed_name=n.getBackupViewedName(e,this._state.lastViewedEventName)),this.track(n.toSnakeCase(e)+".action",t,r,!0)},link:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=n.toSnakeCase(e);return t.link_name=a,t.viewed_name||(t.viewed_name=n.getBackupViewedName(e,this._state.lastViewedEventName)),this.track(n.toSnakeCase(e)+".link",t,r,!0)},_overrideTrackingFunction:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t?r.push(e):r=[e]},_rootTrackingUrl:"https://q.stripe.com/",_namedUrls:{internal:"https://t.stripe.com/"},Helpers:{Page:{getName:function(){}}}};return a.__Util=n,a}();
//# sourceMappingURL=analytics.min.js.map